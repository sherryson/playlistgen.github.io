USE music_project;

CREATE TABLE artistsAlbum (
  artistsname VARCHAR(100) NOT NULL,
  albumname VARCHAR(100) NOT NULL,
  year INT NOT NULL,
  gid VARCHAR(20) NOT NULL,
  PRIMARY KEY(artistsname, albumname)
) engine=InnoDB;

ALTER TABLE artistsAlbum 
	ADD FOREIGN KEY (gid) REFERENCES genre(gid) ON UPDATE CASCADE;


CREATE TABLE genre (
  gid VARCHAR(20) NOT NULL,
  type ENUM('Electronic', 'Pop', 'Hip Hop/Rap', 'Country') NOT NULL,
  PRIMARY KEY(gid)
) engine=InnoDB;


CREATE TABLE songs (
  sname VARCHAR(100),
  artistsname VARCHAR(100) NOT NULL,
  runtime time NOT NULL,
  PRIMARY KEY (sname, artistsname)
) engine=InnoDB;

ALTER TABLE songs 
	ADD FOREIGN KEY (artistsname) REFERENCES artistsAlbum(artistsname) ON UPDATE CASCADE;

CREATE TABLE playlists (
  pname VARCHAR(20) NOT NULL,
  sname VARCHAR(100),
  PRIMARY KEY (pname)
) engine=InnoDB;

ALTER TABLE playlists
	ADD FOREIGN KEY (sname) REFERENCES songs(sname);
